<html lang="en">
<style>
  font-family:helvetica
</style>
<script src="https://d3js.org/d3.v6.js"></script>
<script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>
<link rel="stylesheet" href="main.css">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>More EV For Your Euro</title>
</head>
<body>
  <h1>A History of Earthquakes in Taiwan</h1>
  <p>Because of Taiwan's location along the Pacific "Ring of Fire", the country is particular prone to very frequent earthquakes. Coupled with Taiwan's abundance of mountains and tall structures, these earthquakes can be quite dangerous for citizens. The Taiwan of today is prepared to handle earthquakes thanks to improved disaster response and reduction, a quality that was developed as a necessary response. This page aims to visualize Taiwan's history of earthquakes and their impacts from 1973 to 2024.</p>
</body>

<div id="total_chart"></div>

<div>
    <a href="index.html" class="total_button">Total</a>
    <a href="magnitude.html" class="magnitude_button">Magnitude</a>
    <a href="depth.html" class="depth_button">Depth</a>
</div>

<p>Data from: <a href="https://www.kaggle.com/datasets/taweilo/taiwan-earthquake-dataset/data">Taiwan Earthquake Dataset</a></p>

</body>
<script>
const margin = { top: 20, right: 30, bottom: 40, left: 60 };
const width = 600 - margin.left - margin.right;
const height = 400 - margin.top - margin.bottom;

const svg = d3.select("#total_chart")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", `translate(${margin.left},${margin.top})`);

d3.csv("https://raw.githubusercontent.com/EMui81/narrative-visualization/main/earthquake-detail.csv").then(data => {
    data.forEach(d => {
        d.depth = +d.depth;
    });

    const xScale = d3.scaleBand()
        .domain(data.map(d => d.date))
        .range([0, width])
        .padding(0.1);

    const yScale = d3.scaleLinear()
        .domain([0, d3.max(data, d => d.depth)])
        .nice()
        .range([height, 0]);

    svg.append("g")
        .attr("transform", `translate(0,${height})`)
        .call(d3.axisBottom(xScale));

    svg.append("g")
        .call(d3.axisLeft(yScale));

    svg.selectAll(".bar")
        .data(data)
        .enter()
        .append("rect")
        .attr("class", "bar")
        .attr("x", d => xScale(d.date))
        .attr("y", d => yScale(d.value))
        .attr("width", xScale.bandwidth())
        .attr("height", d => height - yScale(d.value));
}).catch(error => {
    console.error("Error:", error);
});

</script>
</html>
